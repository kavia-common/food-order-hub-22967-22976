{"is_source_file": true, "format": "JavaScript", "description": "This file defines the orderService module which manages order operations such as placing an order, retrieving orders by ID, listing orders, updating order status, and cancelling orders in a food ordering backend system.", "external_files": ["../models/db", "../utils/id", "./menuService"], "external_methods": ["require('../models/db')", "require('../utils/id').genId", "require('./menuService').getById"], "published": ["ORDER_STATUSES", "placeOrder", "getById", "list", "updateStatus", "cancel"], "classes": [], "methods": [{"name": "placeOrder({ userId, items, notes = '', deliveryMethod = 'pickup' })", "description": "Creates a new order with provided user, items, notes, and delivery method. Validates input, computes pricing, and stores the order in the database.", "scope": "", "scopeKind": ""}, {"name": "getById({ id, user })", "description": "Retrieves an order by its ID, with access control based on user role.", "scope": "", "scopeKind": ""}, {"name": "list({ user, status })", "description": "Lists all orders for a user; for non-admins, only their own orders; admins can see all orders, filtered by status if provided.", "scope": "", "scopeKind": ""}, {"name": "updateStatus({ id, status, actor })", "description": "Updates the status of an existing order, with validation and timestamping.", "scope": "", "scopeKind": ""}, {"name": "cancel({ id, user })", "description": "Allows a user to cancel their order if it's in a cancellable state.", "scope": "", "scopeKind": ""}], "calls": ["menuService.getById", "db.orders.push", "db.orders.find", "db.orders.findIndex", "updateStatus"], "search-terms": ["orderService", "placeOrder", "updateStatus", "order management", "food ordering"], "state": 2, "file_id": 18, "knowledge_revision": 37, "git_revision": "", "ctags": [{"_type": "tag", "name": "ORDER_STATUSES", "path": "/home/kavia/workspace/code-generation/food-order-hub-22967-22976/food_order_backend/src/services/orderService.js", "pattern": "/^  ORDER_STATUSES,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "ORDER_STATUSES", "path": "/home/kavia/workspace/code-generation/food-order-hub-22967-22976/food_order_backend/src/services/orderService.js", "pattern": "/^const ORDER_STATUSES = ['placed', 'preparing', 'ready', 'completed', 'cancelled'];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "cancel", "path": "/home/kavia/workspace/code-generation/food-order-hub-22967-22976/food_order_backend/src/services/orderService.js", "pattern": "/^function cancel({ id, user }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ id, user })"}, {"_type": "tag", "name": "db", "path": "/home/kavia/workspace/code-generation/food-order-hub-22967-22976/food_order_backend/src/services/orderService.js", "pattern": "/^const db = require('..\\/models\\/db');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getById", "path": "/home/kavia/workspace/code-generation/food-order-hub-22967-22976/food_order_backend/src/services/orderService.js", "pattern": "/^function getById({ id, user }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ id, user })"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/food-order-hub-22967-22976/food_order_backend/src/services/orderService.js", "pattern": "/^    id: genId('o'),$/", "language": "JavaScript", "kind": "property", "scope": "placeOrder.order", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/food-order-hub-22967-22976/food_order_backend/src/services/orderService.js", "pattern": "/^function list({ user, status }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ user, status })"}, {"_type": "tag", "name": "menuService", "path": "/home/kavia/workspace/code-generation/food-order-hub-22967-22976/food_order_backend/src/services/orderService.js", "pattern": "/^const menuService = require('.\\/menuService');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "order", "path": "/home/kavia/workspace/code-generation/food-order-hub-22967-22976/food_order_backend/src/services/orderService.js", "pattern": "/^  const order = {$/", "language": "JavaScript", "kind": "class", "scope": "placeOrder", "scopeKind": "class"}, {"_type": "tag", "name": "placeOrder", "path": "/home/kavia/workspace/code-generation/food-order-hub-22967-22976/food_order_backend/src/services/orderService.js", "pattern": "/^function placeOrder({ userId, items, notes = '', deliveryMethod = 'pickup' }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ userId, items, notes = '', deliveryMethod = 'pickup' })"}, {"_type": "tag", "name": "updateStatus", "path": "/home/kavia/workspace/code-generation/food-order-hub-22967-22976/food_order_backend/src/services/orderService.js", "pattern": "/^function updateStatus({ id, status, actor }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ id, status, actor })"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/food-order-hub-22967-22976/food_order_backend/src/services/orderService.js", "pattern": "/^    userId,$/", "language": "JavaScript", "kind": "field", "scope": "placeOrder.order", "scopeKind": "class"}], "hash": "d73d5cc044d877b3e4077f722a307699", "format-version": 4, "code-base-name": "food_order_backend", "filename": "food_order_backend/src/services/orderService.js", "fields": [{"name": "ORDER_STATUSES,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}, {"name": "id: genId('o'),", "scope": "placeOrder.order", "scopeKind": "class", "description": "unavailable"}, {"name": "userId,", "scope": "placeOrder.order", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"37": ""}]}